(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{21:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=["headers","body","method","csrfToken"];function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function u(t,e,n,r,o,i,c){try{var s=t[i](c),u=s.value}catch(a){return void n(a)}s.done?e(u):Promise.resolve(u).then(r,o)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){u(i,r,o,c,s,"next",t)}function s(t){u(i,r,o,c,s,"throw",t)}c(void 0)}))}}function l(t){return f.apply(this,arguments)}function f(){return f=a((function*(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.headers,o=e.body,c=e.method,u=void 0===c?"GET":c,a=e.csrfToken,l=void 0===a?yield getCsrfToken():a,f=s(e,r),b={body:o&&"string"!==typeof o?JSON.stringify(o):o},p=i(i({method:u,headers:i({Accept:"application/json","X-CSRF-Token":l,"Content-Type":"application/json"},n),credentials:"same-origin"},b),f);return fetch(t,p)})),f.apply(this,arguments)}},551:function(t,e,n){"use strict";n.r(e),n.d(e,"COMMENT_SUBSCRIPTION_TYPE",(function(){return y})),n.d(e,"CommentSubscription",(function(){return h})),n.d(e,"getCommentSubscriptionStatus",(function(){return j})),n.d(e,"setCommentSubscriptionStatus",(function(){return w}));var r=n(0),o=n(1),i=n.n(o),c=n(3);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],c=!0,s=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(u){s=!0,o=u}finally{try{c||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}function b(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){if(e&&("object"===s(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}var y=Object.freeze({ALL:"all_comments",TOP:"top_level_comments",AUTHOR:"only_author_comments",NOT_SUBSCRIBED:"not_subscribed"}),h=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(s,t);var e,n,o,i=b(s);function s(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var n=t.subscriptionType;(e=i.call(this,t)).commentSubscriptionClick=function(t){e.setState({subscriptionType:t.target.value})};var r=n&&(n.length>0&&n)!==y.NOT_SUBSCRIBED,o={subscriptionType:r?n:y.ALL,subscribed:r,showOptions:!1};return e.state=o,e}return e=s,(n=[{key:"render",value:function(){var t=this,e=this.state,n=e.subscriptionType,o=e.subscribed,i=this.props,s=i.onSubscribe,u=i.onUnsubscribe,a=i.positionType,l=void 0===a?"relative":a,f=i.isLoggedIn;return Object(r.h)("div",{className:l},Object(r.h)(c.b,{labelText:"Comment subscription options",ref:function(e){t.buttonGroupElement=e}},Object(r.h)(c.a,{variant:"outlined",onClick:function(e){f?(o?(u(y.NOT_SUBSCRIBED),t.setState({subscriptionType:y.ALL})):s(n),t.setState({subscribed:!o})):showLoginModal()}},o?"Unsubscribe":"Subscribe"),o?Object(r.h)(c.a,{id:"subscription-settings-btn","data-testid":"subscription-settings",variant:"outlined",icon:function(){return Object(r.h)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",role:"img","aria-labelledby":"ai2ols8ka2ohfp0z568lj68ic2du21s",className:"crayons-icon"},Object(r.h)("title",{id:"ai2ols8ka2ohfp0z568lj68ic2du21s"},"Preferences"),Object(r.h)("path",{d:"M12 1l9.5 5.5v11L12 23l-9.5-5.5v-11L12 1zm0 2.311L4.5 7.653v8.694l7.5 4.342 7.5-4.342V7.653L12 3.311zM12 16a4 4 0 110-8 4 4 0 010 8zm0-2a2 2 0 100-4 2 2 0 000 4z"}))},contentType:"icon"}):null),o&&Object(r.h)(c.e,{triggerButtonId:"subscription-settings-btn",dropdownContentId:"subscription-settings-dropdown",dropdownContentCloseButtonId:"subscription-settings-done-btn","data-repositioning-dropdown":"true","data-testid":"subscriptions-panel",className:"right-0 p-4 s:left-auto".concat("relative"===l?" w-full":""),ref:function(e){t.dropdownElement=e},onOpen:function(){return t.setState({showOptions:!0})},onClose:function(){return t.setState({showOptions:!1})}},Object(r.h)("div",{className:"crayons-fields mb-5"},Object(r.h)(c.f,{variant:"radio"},Object(r.h)(c.k,{id:"subscribe-all",name:"subscribe_comments",value:y.ALL,checked:n===y.ALL,onClick:this.commentSubscriptionClick}),Object(r.h)("label",{htmlFor:"subscribe-all",className:"crayons-field__label"},"All comments",Object(r.h)("p",{className:"crayons-field__description"},"You\u2019ll receive notifications for all new comments."))),Object(r.h)(c.f,{variant:"radio"},Object(r.h)(c.k,{id:"subscribe-toplevel",name:"subscribe_comments",value:y.TOP,onClick:this.commentSubscriptionClick,checked:n===y.TOP}),Object(r.h)("label",{htmlFor:"subscribe-toplevel",className:"crayons-field__label"},"Top-level comments",Object(r.h)("p",{className:"crayons-field__description"},"You\u2019ll receive notifications only for all new top-level comments."))),Object(r.h)(c.f,{variant:"radio"},Object(r.h)(c.k,{id:"subscribe-author",name:"subscribe_comments",value:y.AUTHOR,onClick:this.commentSubscriptionClick,checked:n===y.AUTHOR}),Object(r.h)("label",{htmlFor:"subscribe-author",className:"crayons-field__label"},"Post author comments",Object(r.h)("p",{className:"crayons-field__description"},"You\u2019ll receive notifications only if post author sends a new comment.")))),Object(r.h)(c.a,{id:"subscription-settings-done-btn",className:"w-100",onClick:function(){s(t.state.subscriptionType)}},"Done")))}}])&&l(e.prototype,n),o&&l(e,o),Object.defineProperty(e,"prototype",{writable:!1}),s}(r.Component);h.displayName="CommentSubscription",h.propTypes={positionType:i.a.oneOf(["absolute","relative","static"]).isRequired,onSubscribe:i.a.func.isRequired,onUnsubscribe:i.a.func.isRequired,subscriptionType:i.a.oneOf(Object.entries(y).map((function(t){return u(t,2)[1]}))).isRequired,isLoggedIn:i.a.bool.isRequired};var m=n(21);function v(t,e,n,r,o,i,c){try{var s=t[i](c),u=s.value}catch(a){return void n(a)}s.done?e(u):Promise.resolve(u).then(r,o)}function O(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){v(i,r,o,c,s,"next",t)}function s(t){v(i,r,o,c,s,"throw",t)}c(void 0)}))}}function j(t){return g.apply(this,arguments)}function g(){return(g=O((function*(t){try{var e=yield Object(m.a)("/notification_subscriptions/Article/".concat(t));return yield e.json()}catch(n){return new Error("An error occurred, please try again")}}))).apply(this,arguments)}function w(t,e){return S.apply(this,arguments)}function S(){return(S=O((function*(t,e){var n;try{var r=yield Object(m.a)("/notification_subscriptions/Article/".concat(t),{method:"POST",body:JSON.stringify({config:e})}),o=yield r.json();if("boolean"!==typeof o)return n="An error occurred, please try again";n="You have been unsubscribed from comments for this post",o&&(n="You have been subscribed to ".concat(e.replace(/_/g," ")))}catch(i){n="An error occurred, please try again"}return n}))).apply(this,arguments)}}}]);
//# sourceMappingURL=138-355e416db6c69145bdee.chunk.js.map